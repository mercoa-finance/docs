openapi: 3.1.0
info:
  title: api
  version: ""
paths:
  /bankLookup:
    get:
      description: Find bank account details
      operationId: bankLookup_find
      tags:
        - BankLookup
      parameters:
        - name: routingNumber
          in: query
          description: Routing number to validate
          required: true
          schema:
            type: string
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BankLookupResponse"
      security: &ref_0
        - BearerAuth: []
  /counterparties:
    get:
      description: Get all counterparties
      operationId: counterparty_getAll
      tags:
        - Counterparty
      parameters: []
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/EntityResponse"
      security: *ref_0
  /entity/{entityId}/counterparties:
    get:
      description: Find counterparties
      operationId: counterparty_find
      tags:
        - Counterparty
      parameters:
        - name: entityId
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/EntityId"
        - name: paymentMethods
          in: query
          description: include payment method information in response
          required: false
          schema:
            type: boolean
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/CounterpartyResponse"
      security: *ref_0
  /entities:
    get:
      description: Get all entities
      operationId: entity_getAll
      tags:
        - Entity
      parameters: []
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/EntityResponse"
      security: *ref_0
  /entity:
    get:
      operationId: entity_find
      tags:
        - Entity
      parameters:
        - name: foreignId
          in: query
          required: false
          schema:
            type: string
        - name: status
          in: query
          required: false
          schema:
            $ref: "#/components/schemas/EntityStatus"
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/EntityResponse"
      security: *ref_0
    post:
      operationId: entity_create
      tags:
        - Entity
      parameters: []
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/EntityResponse"
      security: *ref_0
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/EntityRequest"
  /entity/{entityId}:
    get:
      description: Get entity
      operationId: entity_get
      tags:
        - Entity
      parameters:
        - name: entityId
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/EntityId"
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/EntityResponse"
      security: *ref_0
    post:
      description: Update entity
      operationId: entity_update
      tags:
        - Entity
      parameters:
        - name: entityId
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/EntityId"
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/EntityResponse"
      security: *ref_0
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/EntityUpdateRequest"
    delete:
      description: Delete entity
      operationId: entity_delete
      tags:
        - Entity
      parameters:
        - name: entityId
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/EntityId"
      responses:
        "204":
          description: ""
      security: *ref_0
  /entity/{entityId}/invoices:
    get:
      description: Get invoices for an entity
      operationId: entity_getInvoices
      tags:
        - Entity
      parameters:
        - name: entityId
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/EntityId"
        - name: status
          in: query
          description: Invoice status to filter on
          required: false
          schema:
            $ref: "#/components/schemas/InvoiceStatus"
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/InvoiceResponse"
      security: *ref_0
  /entity/{entityId}/accept-tos:
    post:
      description: End user accepts Terms of Service
      operationId: entity_acceptTermsOfService
      tags:
        - Entity
      parameters:
        - name: entityId
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/EntityId"
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                type: string
      security: *ref_0
  /entity/{entityId}/token:
    get:
      description: Get JWT token for entity
      operationId: entity_getToken
      tags:
        - Entity
      parameters:
        - name: entityId
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/EntityId"
          examples:
            Example1:
              value: ent_a0f6ea94-0761-4a5e-a416-3c453cb7eced
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                type: string
              examples:
                Example1:
                  value: >-
                    eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MTIzNDU2Nzg5LCJuYW1lIjoiSm9zZXBoIn0.OpOSSw7e485LOP5PrzScxHb7SR6sAOMRckfFwi4rp7o
      security: *ref_0
  /invoice:
    post:
      description: Create invoice
      operationId: invoice_create
      tags:
        - Invoice
      parameters: []
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InvoiceResponse"
      security: *ref_0
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/InvoiceRequest"
  /invoice/{invoiceId}:
    get:
      description: Get invoice
      operationId: invoice_get
      tags:
        - Invoice
      parameters:
        - name: invoiceId
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/InvoiceId"
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InvoiceResponse"
      security: *ref_0
    post:
      description: Update invoice
      operationId: invoice_update
      tags:
        - Invoice
      parameters:
        - name: invoiceId
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/InvoiceId"
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InvoiceResponse"
      security: *ref_0
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/InvoiceRequest"
    delete:
      description: >-
        Delete invoice. Only invoices in the DRAFT and NEW status can be
        deleted.
      operationId: invoice_delete
      tags:
        - Invoice
      parameters:
        - name: invoiceId
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/InvoiceId"
      responses:
        "204":
          description: ""
      security: *ref_0
  /invoice/{invoiceId}/documents:
    get:
      description: Get documents (scanned/uploaded images) associated with this invoice
      operationId: invoice_getDocuments
      tags:
        - Invoice
      parameters:
        - name: invoiceId
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/InvoiceId"
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/DocumentResponse"
      security: *ref_0
  /invoice/{invoiceId}/vendorlink:
    get:
      description: Get temporary link for vendor to accept payment
      operationId: invoice_getVendorLink
      tags:
        - Invoice
      parameters:
        - name: invoiceId
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/InvoiceId"
          examples:
            Example1:
              value: inv_a0f6ea94-0761-4a5e-a416-3c453cb7eced
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                type: string
              examples:
                Example1:
                  value: https://mercoa.com/vendors/accept-payment/?t=123456
      security: *ref_0
  /invoice/{invoiceId}/sendVendorEmail:
    post:
      description: Trigger email to vendor inviting them into the vendor portal
      operationId: invoice_sendVendorEmail
      tags:
        - Invoice
      parameters:
        - name: invoiceId
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/InvoiceId"
      responses:
        "204":
          description: ""
      security: *ref_0
  /ocr:
    post:
      description: Run OCR on an Base64 encoded image or PDF
      operationId: ocr_ocr
      tags:
        - Ocr
      parameters: []
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/OcrResponse"
      security: *ref_0
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                mimeType:
                  type: string
                image:
                  type: string
              required:
                - mimeType
                - image
  /emailOcr:
    post:
      operationId: ocr_emailInbox
      tags:
        - Ocr
      parameters: []
      responses:
        "204":
          description: ""
      security: *ref_0
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                items:
                  type: array
                  items:
                    $ref: "#/components/schemas/EmailOcrRequest"
              required:
                - items
  /organization:
    get:
      description: Get current organization information
      operationId: organization_get
      tags:
        - Organization
      parameters:
        - name: paymentMethods
          in: query
          description: include supported payment methods in response
          required: false
          schema:
            type: boolean
        - name: emailProvider
          in: query
          description: include email provider info in response
          required: false
          schema:
            type: boolean
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/OrganizationResponse"
      security: *ref_0
    post:
      description: Update current organization
      operationId: organization_update
      tags:
        - Organization
      parameters: []
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/OrganizationResponse"
      security: *ref_0
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/OrganizationRequest"
  /paymentMethod/schema:
    post:
      description: Create custom payment method schema
      operationId: paymentMethodSchema_create
      tags:
        - PaymentMethodSchema
      parameters: []
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PaymentMethodSchemaResponse"
      security: *ref_0
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/PaymentMethodSchemaRequest"
  /paymentMethod/schema/{schemaId}:
    get:
      description: Get custom payment method schema
      operationId: paymentMethodSchema_get
      tags:
        - PaymentMethodSchema
      parameters:
        - name: schemaId
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/PaymentMethodSchemaId"
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PaymentMethodSchemaResponse"
      security: *ref_0
    delete:
      description: Delete custom payment method schema
      operationId: paymentMethodSchema_delete
      tags:
        - PaymentMethodSchema
      parameters:
        - name: schemaId
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/PaymentMethodSchemaId"
      responses:
        "204":
          description: ""
      security: *ref_0
  /entity/{entityId}/paymentMethods:
    get:
      operationId: paymentMethod_getAll
      tags:
        - PaymentMethod
      parameters:
        - name: entityId
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/EntityId"
        - name: type
          in: query
          description: Type of payment method to filter
          required: false
          schema:
            $ref: "#/components/schemas/PaymentMethodType"
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/PaymentMethodResponse"
      security: *ref_0
  /entity/{entityId}/paymentMethod:
    post:
      description: Create payment method
      operationId: paymentMethod_create
      tags:
        - PaymentMethod
      parameters:
        - name: entityId
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/EntityId"
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PaymentMethodResponse"
      security: *ref_0
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/PaymentMethodRequest"
  /entity/{entityId}/paymentMethod/{paymentMethodId}:
    get:
      description: Get payment method
      operationId: paymentMethod_get
      tags:
        - PaymentMethod
      parameters:
        - name: entityId
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/EntityId"
        - name: paymentMethodId
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/PaymentMethodId"
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PaymentMethodResponse"
      security: *ref_0
    delete:
      description: Delete payment method
      operationId: paymentMethod_delete
      tags:
        - PaymentMethod
      parameters:
        - name: entityId
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/EntityId"
        - name: paymentMethodId
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/PaymentMethodId"
      responses:
        "204":
          description: ""
      security: *ref_0
  /entity/{entityId}/paymentMethod/{paymentMethodId}/micro-deposits:
    post:
      description: Initiate micro deposits for a bank account
      operationId: paymentMethod_initiateMicroDeposits
      tags:
        - PaymentMethod
      parameters:
        - name: entityId
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/EntityId"
        - name: paymentMethodId
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/PaymentMethodId"
      responses:
        "204":
          description: ""
      security: *ref_0
    put:
      description: Complete micro deposit verification
      operationId: paymentMethod_completeMicroDeposits
      tags:
        - PaymentMethod
      parameters:
        - name: entityId
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/EntityId"
        - name: paymentMethodId
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/PaymentMethodId"
      responses:
        "204":
          description: ""
      security: *ref_0
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                amounts:
                  type: array
                  items:
                    type: integer
              required:
                - amounts
  /entity/{entityId}/representatives:
    get:
      description: Get representatives for an entity
      operationId: representative_getAll
      tags:
        - Representative
      parameters:
        - name: entityId
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/EntityId"
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/RepresentativeResponse"
      security: *ref_0
  /entity/{entityId}/representative:
    post:
      description: Create representative
      operationId: representative_create
      tags:
        - Representative
      parameters:
        - name: entityId
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/EntityId"
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RepresentativeResponse"
      security: *ref_0
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/RepresentativeRequest"
  /entity/{entityId}/representative/{representativeId}:
    get:
      description: Get representative
      operationId: representative_get
      tags:
        - Representative
      parameters:
        - name: entityId
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/EntityId"
        - name: representativeId
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/RepresentativeId"
      responses:
        "200":
          description: ""
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RepresentativeResponse"
      security: *ref_0
    delete:
      description: Delete representative
      operationId: representative_delete
      tags:
        - Representative
      parameters:
        - name: entityId
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/EntityId"
        - name: representativeId
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/RepresentativeId"
      responses:
        "204":
          description: ""
      security: *ref_0
components:
  schemas:
    BankAddress:
      type: object
      properties:
        address:
          type: string
        city:
          type: string
        state:
          type: string
        postalCode:
          type: string
        postalCodeExtension:
          type: string
      required:
        - address
        - city
        - state
        - postalCode
        - postalCodeExtension
    BankLookupResponse:
      type: object
      properties:
        bankName:
          type: string
        bankAddress:
          $ref: "#/components/schemas/BankAddress"
      required:
        - bankName
        - bankAddress
    FullName:
      type: object
      properties:
        firstName:
          type: string
        middleName:
          type: string
        lastName:
          type: string
        suffix:
          type: string
      required:
        - firstName
        - lastName
    BirthDate:
      type: object
      properties:
        day:
          type: string
        month:
          type: string
        year:
          type: string
    Address:
      type: object
      properties:
        addressLine1:
          type: string
        addressLine2:
          type: string
        city:
          type: string
        stateOrProvince:
          type: string
        postalCode:
          type: string
        country:
          type: string
      required:
        - addressLine1
        - city
        - stateOrProvince
        - postalCode
    PhoneNumber:
      type: object
      properties:
        countryCode:
          type: string
        number:
          type: string
      required:
        - countryCode
        - number
    IndividualGovernmentId:
      type: object
      properties:
        ssn:
          $ref: "#/components/schemas/Ssn"
        itin:
          $ref: "#/components/schemas/Itin"
    Ssn:
      type: object
      properties:
        full:
          type: string
        lastFour:
          type: string
      required:
        - lastFour
    Itin:
      type: object
      properties:
        full:
          type: string
        lastFour:
          type: string
      required:
        - lastFour
    CounterpartyResponse:
      type: object
      properties:
        paymentMethods:
          type: array
          items:
            $ref: "#/components/schemas/PaymentMethodResponse"
      required:
        - paymentMethods
      allOf:
        - $ref: "#/components/schemas/EntityResponse"
    EntityId:
      type: string
    EntityRequest:
      type: object
      properties:
        foreignId:
          type: string
        emailTo:
          type: string
          description: Email inbox address. Do not inclue the @domain.com
        ownedByOrg:
          type: boolean
        accountType:
          $ref: "#/components/schemas/AccountType"
        profile:
          $ref: "#/components/schemas/ProfileRequest"
      required:
        - accountType
        - profile
    EntityUpdateRequest:
      type: object
      properties:
        foreignId:
          type: string
        emailTo:
          type: string
          description: Email inbox address. Do not inclue the @domain.com
        ownedByOrg:
          type: boolean
        accountType:
          $ref: "#/components/schemas/AccountType"
        profile:
          $ref: "#/components/schemas/ProfileRequest"
    EntityResponse:
      type: object
      properties:
        id:
          $ref: "#/components/schemas/EntityId"
        foreignId:
          type: string
        emailTo:
          type: string
        ownedByOrg:
          type: boolean
        accountType:
          $ref: "#/components/schemas/AccountType"
        name:
          type: string
        email:
          type: string
        profile:
          $ref: "#/components/schemas/ProfileResponse"
        status:
          $ref: "#/components/schemas/EntityStatus"
        acceptedTos:
          type: boolean
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
      required:
        - id
        - ownedByOrg
        - accountType
        - name
        - email
        - profile
        - status
        - acceptedTos
        - createdAt
        - updatedAt
    ProfileRequest:
      type: object
      properties:
        business:
          $ref: "#/components/schemas/BusinessProfileRequest"
        individual:
          $ref: "#/components/schemas/IndividualProfileRequest"
    ProfileResponse:
      type: object
      properties:
        business:
          $ref: "#/components/schemas/BusinessProfileResponse"
        individual:
          $ref: "#/components/schemas/IndividualProfileResponse"
    BusinessProfileRequest:
      type: object
      properties:
        email:
          type: string
        legalBusinessName:
          type: string
        businessType:
          $ref: "#/components/schemas/BusinessType"
        phone:
          $ref: "#/components/schemas/PhoneNumber"
        doingBusinessAs:
          type: string
        website:
          type: string
        description:
          type: string
        address:
          $ref: "#/components/schemas/Address"
        ownersProvided:
          type: boolean
        taxId:
          $ref: "#/components/schemas/TaxId"
      required:
        - email
        - legalBusinessName
        - businessType
    BusinessProfileResponse:
      type: object
      properties:
        email:
          type: string
        legalBusinessName:
          type: string
        businessType:
          $ref: "#/components/schemas/BusinessType"
        phone:
          $ref: "#/components/schemas/PhoneNumber"
        doingBusinessAs:
          type: string
        website:
          type: string
        description:
          type: string
        address:
          $ref: "#/components/schemas/Address"
        ownersProvided:
          type: boolean
        taxIDProvided:
          type: boolean
      required:
        - email
        - legalBusinessName
        - businessType
        - ownersProvided
        - taxIDProvided
    IndividualProfileRequest:
      type: object
      properties:
        email:
          type: string
        name:
          $ref: "#/components/schemas/FullName"
        phone:
          $ref: "#/components/schemas/PhoneNumber"
        address:
          $ref: "#/components/schemas/Address"
        birthDate:
          $ref: "#/components/schemas/BirthDate"
        governmentID:
          $ref: "#/components/schemas/IndividualGovernmentId"
      required:
        - email
        - name
    IndividualProfileResponse:
      type: object
      properties:
        email:
          type: string
        name:
          $ref: "#/components/schemas/FullName"
        phone:
          $ref: "#/components/schemas/PhoneNumber"
        address:
          $ref: "#/components/schemas/Address"
        birthDateProvided:
          type: boolean
        governmentIDProvided:
          type: boolean
      required:
        - email
        - name
        - birthDateProvided
        - governmentIDProvided
    TaxId:
      type: object
      properties:
        ein:
          $ref: "#/components/schemas/Ein"
      required:
        - ein
    Ein:
      type: object
      properties:
        number:
          type: string
      required:
        - number
    BusinessType:
      type: string
      enum:
        - soleProprietorship
        - unincorporatedAssociation
        - trust
        - publicCorporation
        - privateCorporation
        - llc
        - partnership
        - unincorporatedNonProfit
        - incorporatedNonProfit
    AccountType:
      type: string
      enum:
        - business
        - individual
    EntityStatus:
      type: string
      enum:
        - unverified
        - pending
        - resubmit
        - review
        - verified
        - failed
    InvoiceRequest:
      type: object
      properties:
        status:
          $ref: "#/components/schemas/InvoiceStatus"
        amount:
          type: number
          format: double
        currency:
          type: string
        deductionDate:
          type: string
          format: date-time
        fundedDate:
          type: string
          format: date-time
        dueDate:
          type: string
          format: date-time
        invoiceNumber:
          type: string
        noteToSelf:
          type: string
        payerId:
          $ref: "#/components/schemas/EntityId"
        paymentSourceId:
          $ref: "#/components/schemas/PaymentMethodId"
        vendorId:
          $ref: "#/components/schemas/EntityId"
        paymentDestinationId:
          $ref: "#/components/schemas/PaymentMethodId"
        createVendor:
          $ref: "#/components/schemas/CreateVendorRequest"
          description: >-
            When paying to a new vendor, use the createVendor object. Mercoa
            will create the vendor entity and tie it to this invoice. This
            object is ignored when updating an invoice.
        uploadedImage:
          type: string
    InvoiceResponse:
      type: object
      properties:
        id:
          $ref: "#/components/schemas/InvoiceId"
        status:
          $ref: "#/components/schemas/InvoiceStatus"
        amount:
          type: number
          format: double
        currency:
          type: string
        deductionDate:
          type: string
          format: date-time
        fundedDate:
          type: string
          format: date-time
        dueDate:
          type: string
          format: date-time
        invoiceNumber:
          type: string
        noteToSelf:
          type: string
        payerId:
          $ref: "#/components/schemas/EntityId"
        payer:
          $ref: "#/components/schemas/EntityResponse"
        paymentSource:
          $ref: "#/components/schemas/PaymentMethodResponse"
        paymentSourceId:
          $ref: "#/components/schemas/PaymentMethodId"
        vendorId:
          $ref: "#/components/schemas/EntityId"
        vendor:
          $ref: "#/components/schemas/EntityResponse"
        paymentDestination:
          $ref: "#/components/schemas/PaymentMethodResponse"
        paymentDestinationId:
          $ref: "#/components/schemas/PaymentMethodId"
        paymentDestinationConfirmed:
          type: boolean
        transactions:
          type: array
          items:
            $ref: "#/components/schemas/TransactionResponse"
        processedAt:
          type: string
          format: date-time
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
      required:
        - id
        - status
        - paymentDestinationConfirmed
        - createdAt
        - updatedAt
    InvoiceId:
      type: string
    TransactionResponse:
      type: object
      properties:
        id:
          type: string
        status:
          $ref: "#/components/schemas/TransactionStatus"
        amount:
          type: number
          format: double
        currency:
          type: string
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
      required:
        - id
        - status
        - amount
        - createdAt
        - updatedAt
    DocumentResponse:
      type: object
      properties:
        mimeType:
          type: string
        uri:
          type: string
        ocrResults:
          description: Raw output from OCR
      required:
        - mimeType
        - uri
        - ocrResults
    CreateVendorRequest:
      type: object
      properties:
        vendor:
          $ref: "#/components/schemas/EntityRequest"
        paymentMethod:
          $ref: "#/components/schemas/PaymentMethodRequest"
      required:
        - vendor
    TransactionStatus:
      type: string
      enum:
        - created
        - pending
        - completed
        - failed
        - reversed
        - queued
        - canceled
    InvoiceStatus:
      type: string
      enum:
        - DRAFT
        - NEW
        - PENDING
        - PAID
        - CANCELED
        - REFUSED
        - APPROVED
        - ARCHIVED
    OcrResponse:
      type: object
      properties:
        invoice:
          $ref: "#/components/schemas/InvoiceResponse"
        vendor:
          $ref: "#/components/schemas/EntityResponse"
        check:
          $ref: "#/components/schemas/CheckResponse"
      required:
        - invoice
        - vendor
        - check
    OcrMailbox:
      type: object
      properties:
        Address:
          type: string
        Name:
          type: string
      required:
        - Address
    Attachments:
      type: object
      properties:
        Name:
          type: string
        ContentType:
          type: string
        ContentLength:
          type: integer
        ContentID:
          type: string
        DownloadToken:
          type: string
      required:
        - Name
        - ContentType
        - ContentLength
        - ContentID
        - DownloadToken
    EmailOcrRequest:
      type: object
      properties:
        Uuid:
          type: array
          items:
            type: string
        MessageId:
          type: string
        InReplyTo:
          type: string
        From:
          $ref: "#/components/schemas/OcrMailbox"
        To:
          type: array
          items:
            $ref: "#/components/schemas/OcrMailbox"
        Cc:
          type: array
          items:
            $ref: "#/components/schemas/OcrMailbox"
        ReplyTo:
          $ref: "#/components/schemas/OcrMailbox"
        SentAtDate:
          type: string
        Subject:
          type: string
        Attachments:
          type: array
          items:
            $ref: "#/components/schemas/Attachments"
        Headers: {}
        SpamScore:
          type: number
          format: double
        ExtractedMarkdownMessage:
          type: string
        ExtractedMarkdownSignature:
          type: string
        RawHtmlBody:
          type: string
        RawTextBody:
          type: string
      required:
        - Uuid
        - MessageId
        - From
        - To
        - Cc
        - SentAtDate
        - Subject
        - Attachments
        - Headers
        - SpamScore
    OrganizationId:
      type: string
    OrganizationRequest:
      type: object
      properties:
        name:
          type: string
        logo:
          type: string
        websiteUrl:
          type: string
        supportEmail:
          type: string
        paymentMethods:
          $ref: "#/components/schemas/PaymentMethodsRequest"
        emailProvider:
          $ref: "#/components/schemas/EmailProviderRequest"
    OrganizationResponse:
      type: object
      properties:
        id:
          $ref: "#/components/schemas/OrganizationId"
        sandbox:
          type: boolean
        name:
          type: string
        logoUrl:
          type: string
        websiteUrl:
          type: string
        supportEmail:
          type: string
        paymentMethods:
          $ref: "#/components/schemas/PaymentMethodsResponse"
        emailProvider:
          $ref: "#/components/schemas/EmailProviderResponse"
      required:
        - id
        - sandbox
        - name
    PaymentRailMarkupType:
      type: string
      enum:
        - flat
        - percent
    PaymentRailMarkup:
      type: object
      properties:
        type:
          $ref: "#/components/schemas/PaymentRailMarkupType"
        amount:
          type: number
          format: double
      required:
        - type
        - amount
    PaymentRailRequest:
      type: object
      properties:
        type:
          $ref: "#/components/schemas/PaymentMethodType"
        name:
          type: string
        markup:
          $ref: "#/components/schemas/PaymentRailMarkup"
        description:
          type: string
        active:
          type: boolean
      required:
        - type
        - name
        - active
    PaymentRailResponse:
      type: object
      properties:
        avaliable:
          type: boolean
      required:
        - avaliable
      allOf:
        - $ref: "#/components/schemas/PaymentRailRequest"
    PaymentMethodsRequest:
      type: object
      properties:
        payerPayments:
          type: array
          items:
            $ref: "#/components/schemas/PaymentRailRequest"
        backupDisbursements:
          type: array
          items:
            $ref: "#/components/schemas/PaymentRailRequest"
        vendorDisbursements:
          type: array
          items:
            $ref: "#/components/schemas/PaymentRailRequest"
      required:
        - payerPayments
        - backupDisbursements
        - vendorDisbursements
    PaymentMethodsResponse:
      type: object
      properties:
        payerPayments:
          type: array
          items:
            $ref: "#/components/schemas/PaymentRailResponse"
        backupDisbursements:
          type: array
          items:
            $ref: "#/components/schemas/PaymentRailResponse"
        vendorDisbursements:
          type: array
          items:
            $ref: "#/components/schemas/PaymentRailResponse"
      required:
        - payerPayments
        - backupDisbursements
        - vendorDisbursements
    EmailProviderRequest:
      type: object
      properties:
        sender:
          $ref: "#/components/schemas/EmailSenderRequest"
        inboxDomain:
          type: string
      required:
        - sender
        - inboxDomain
    EmailProviderResponse:
      type: object
      properties:
        sender:
          $ref: "#/components/schemas/EmailSenderResponse"
        inboxDomain:
          type: string
      required:
        - sender
        - inboxDomain
    EmailSenderProvider:
      type: string
      enum:
        - none
        - sendgrid
        - resend
    EmailSenderRequest:
      type: object
      properties:
        provider:
          $ref: "#/components/schemas/EmailSenderProvider"
        fromEmail:
          type: string
        fromName:
          type: string
        apiKey:
          type: string
      required:
        - provider
        - fromEmail
        - fromName
    EmailSenderResponse:
      type: object
      properties:
        provider:
          $ref: "#/components/schemas/EmailSenderProvider"
        fromEmail:
          type: string
        fromName:
          type: string
        hasApiKey:
          type: boolean
      required:
        - provider
        - fromEmail
        - fromName
        - hasApiKey
    PaymentMethodSchemaId:
      type: string
    PaymentMethodSchemaRequest:
      type: object
      properties:
        name:
          type: string
        isSource:
          type: boolean
          description: This payment method can be used as a payment source for an invoice
        isDestination:
          type: boolean
          description: >-
            This payment method can be used as a payment destination for an
            invoice
        fields:
          type: array
          items:
            $ref: "#/components/schemas/PaymentMethodSchemaField"
      required:
        - name
        - isSource
        - isDestination
        - fields
    PaymentMethodSchemaResponse:
      type: object
      properties:
        id:
          $ref: "#/components/schemas/PaymentMethodSchemaId"
        name:
          type: string
        isSource:
          type: boolean
          description: This payment method can be used as a payment source for an invoice
        isDestination:
          type: boolean
          description: >-
            This payment method can be used as a payment destination for an
            invoice
        fields:
          type: array
          items:
            $ref: "#/components/schemas/PaymentMethodSchemaField"
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
      required:
        - id
        - name
        - isSource
        - isDestination
        - fields
        - createdAt
        - updatedAt
    PaymentMethodSchemaFieldType:
      type: string
      enum:
        - text
        - number
        - select
    PaymentMethodSchemaField:
      type: object
      properties:
        name:
          type: string
        displayName:
          type: string
        type:
          $ref: "#/components/schemas/PaymentMethodSchemaFieldType"
        optional:
          type: boolean
        options:
          type: string
          description: When type is 'select', provide options that can be selected
      required:
        - name
        - type
        - optional
    PaymentMethodId:
      type: string
    PaymentMethodRequest:
      type: object
      properties:
        type:
          $ref: "#/components/schemas/PaymentMethodType"
        bankAccount:
          $ref: "#/components/schemas/BankAccountRequest"
        check:
          $ref: "#/components/schemas/CheckRequest"
        card:
          $ref: "#/components/schemas/CardRequest"
        custom:
          $ref: "#/components/schemas/CustomPaymentMethodRequest"
      required:
        - type
    PaymentMethodResponse:
      type: object
      properties:
        id:
          $ref: "#/components/schemas/PaymentMethodId"
        type:
          $ref: "#/components/schemas/PaymentMethodType"
        bankAccount:
          $ref: "#/components/schemas/BankAccountResponse"
        check:
          $ref: "#/components/schemas/CheckResponse"
        card:
          $ref: "#/components/schemas/CardResponse"
        custom:
          $ref: "#/components/schemas/CustomPaymentMethodResponse"
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
      required:
        - id
        - type
        - createdAt
        - updatedAt
    BankAccountId:
      type: string
    BankAccountRequest:
      type: object
      properties:
        id:
          $ref: "#/components/schemas/BankAccountId"
        bankName:
          type: string
        routingNumber:
          type: string
        accountNumber:
          type: string
        accountType:
          $ref: "#/components/schemas/BankType"
      required:
        - bankName
        - routingNumber
        - accountNumber
        - accountType
    BankAccountResponse:
      type: object
      properties:
        id:
          $ref: "#/components/schemas/BankAccountId"
        bankName:
          type: string
        routingNumber:
          type: string
        accountNumber:
          type: string
        accountType:
          $ref: "#/components/schemas/BankType"
        status:
          $ref: "#/components/schemas/BankStatus"
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
      required:
        - id
        - bankName
        - routingNumber
        - accountNumber
        - accountType
        - status
        - createdAt
        - updatedAt
    CardId:
      type: string
    CardRequest:
      type: object
      properties:
        id:
          $ref: "#/components/schemas/CardId"
        type:
          $ref: "#/components/schemas/CardType"
        brand:
          $ref: "#/components/schemas/CardBrand"
        lastFour:
          type: string
        expMonth:
          type: string
        expYear:
          type: string
        token:
          type: string
      required:
        - type
        - brand
        - lastFour
        - expMonth
        - expYear
        - token
    CardResponse:
      type: object
      properties:
        id:
          $ref: "#/components/schemas/CardId"
        type:
          $ref: "#/components/schemas/CardType"
        brand:
          $ref: "#/components/schemas/CardBrand"
        lastFour:
          type: string
        expMonth:
          type: string
        expYear:
          type: string
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
      required:
        - id
        - type
        - brand
        - lastFour
        - expMonth
        - expYear
        - createdAt
        - updatedAt
    CheckId:
      type: string
    CheckRequest:
      type: object
      properties:
        payToTheOrderOf:
          type: string
        addressLine1:
          type: string
        addressLine2:
          type: string
        city:
          type: string
        stateOrProvince:
          type: string
        postalCode:
          type: string
        country:
          type: string
      required:
        - payToTheOrderOf
        - addressLine1
        - city
        - stateOrProvince
        - postalCode
        - country
    CheckResponse:
      type: object
      properties:
        id:
          $ref: "#/components/schemas/CheckId"
        payToTheOrderOf:
          type: string
        addressLine1:
          type: string
        addressLine2:
          type: string
        city:
          type: string
        stateOrProvince:
          type: string
        postalCode:
          type: string
        country:
          type: string
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
      required:
        - id
        - payToTheOrderOf
        - addressLine1
        - city
        - stateOrProvince
        - postalCode
        - country
        - createdAt
        - updatedAt
    CustomId:
      type: string
    CustomPaymentMethodRequest:
      type: object
      properties:
        foreignId:
          type: string
          description: ID for this payment method in your system
        accountName:
          type: string
        accountNumber:
          type: string
        schemaId:
          $ref: "#/components/schemas/PaymentMethodSchemaId"
          description: >-
            Payment method schema used for this payment method. Defines the
            fields that this payment method contains.
        data:
          type: object
          additionalProperties:
            type: string
          description: >-
            Object of key/value pairs that matches the keys in the linked
            payment method schema.
      required:
        - foreignId
        - schemaId
        - data
    CustomPaymentMethodResponse:
      type: object
      properties:
        id:
          $ref: "#/components/schemas/CustomId"
        foreignId:
          type: string
          description: ID for this payment method in your system
        accountName:
          type: string
        accountNumber:
          type: string
        schemaId:
          $ref: "#/components/schemas/PaymentMethodSchemaId"
          description: >-
            Payment method schema used for this payment method. Defines the
            fields that this payment method contains.
        schema:
          $ref: "#/components/schemas/PaymentMethodSchemaResponse"
        data:
          type: object
          additionalProperties:
            type: string
          description: >-
            Object of key/value pairs that matches the keys in the linked
            payment method schema.
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
      required:
        - id
        - foreignId
        - schemaId
        - schema
        - data
        - createdAt
        - updatedAt
    PaymentMethodType:
      type: string
      enum:
        - custom
        - check
        - bankAccount
        - na
        - card
        - bnpl
        - virtualCard
    BankType:
      type: string
      enum:
        - CHECKING
        - SAVINGS
        - UNKNOWN
    BankStatus:
      type: string
      enum:
        - NEW
        - VERIFIED
        - VERIFICATION_FAILED
        - PENDING
        - ERRORED
    CardType:
      type: string
      enum:
        - credit
        - debit
        - prepaid
        - unknown
    CardBrand:
      type: string
      enum:
        - AmericanExpress
        - Discover
        - Mastercard
        - Visa
    RepresentativeId:
      type: string
    RepresentativeRequest:
      type: object
      properties:
        name:
          $ref: "#/components/schemas/FullName"
        phone:
          $ref: "#/components/schemas/PhoneNumber"
        email:
          type: string
        address:
          $ref: "#/components/schemas/Address"
        birthDate:
          $ref: "#/components/schemas/BirthDate"
        governmentID:
          $ref: "#/components/schemas/IndividualGovernmentId"
        responsibilities:
          $ref: "#/components/schemas/Responsibilities"
      required:
        - name
        - phone
        - email
        - address
        - birthDate
        - governmentID
        - responsibilities
    RepresentativeResponse:
      type: object
      properties:
        id:
          $ref: "#/components/schemas/RepresentativeId"
        name:
          $ref: "#/components/schemas/FullName"
        phone:
          $ref: "#/components/schemas/PhoneNumber"
        email:
          type: string
        address:
          $ref: "#/components/schemas/Address"
        birthDateProvided:
          type: boolean
        governmentIDProvided:
          type: boolean
        responsibilities:
          $ref: "#/components/schemas/Responsibilities"
        createdOn:
          type: string
          format: date-time
        updatedOn:
          type: string
          format: date-time
        disabledOn:
          type: string
          format: date-time
      required:
        - id
        - name
        - phone
        - email
        - address
        - birthDateProvided
        - governmentIDProvided
        - responsibilities
        - createdOn
        - updatedOn
    Responsibilities:
      type: object
      properties:
        jobTitle:
          type: string
        isController:
          type: boolean
        isOwner:
          type: boolean
        ownershipPercentage:
          type: number
          format: double
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
servers:
  - url: https://api.mercoa.com
    description: Production
